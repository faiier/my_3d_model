<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz with AR Model</title>
    <script type="module">
        // Firebase initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
        
  const firebaseConfig = {
    apiKey: "AIzaSyDPKHxp3yrDN_ZEgDXvDIS9tFECjwbAEiQ",
    authDomain: "training-casting-app.firebaseapp.com",
    databaseURL: "https://training-casting-app-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "training-casting-app",
    storageBucket: "training-casting-app.firebasestorage.app",
    messagingSenderId: "669646076066",
    appId: "1:669646076066:web:52b7d83018e54dc73efffb",
    measurementId: "G-292T5HD5VS"
  };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Helper function to save data
        function saveToFirebase(data) {
            const quizRef = ref(database, 'quiz-responses');
            push(quizRef, data);
        }

        // Timer logic
        let startTime;
        function startTimer() {
            startTime = Date.now();
        }

        function stopTimer() {
            return (Date.now() - startTime) / 1000; // return elapsed time in seconds
        }

        window.saveToFirebase = saveToFirebase;
        window.startTimer = startTimer;
        window.stopTimer = stopTimer;
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: #f4f4f9;
        }

        .question-container {
            margin: 20px auto;
            max-width: 600px;
            padding: 20px;
            border: 1px solid #ddd;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .answers {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .answer {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .answer:hover {
            background-color: #0056b3;
        }

        model-viewer {
            width: 100%;
            height: 300px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="question-container">
        <h2 id="question">Loading question...</h2>
        <div class="answers" id="answers"></div>
    </div>

    <model-viewer src="Models/wheel 2.glb" alt="3D Model"
        ar ar-modes="webxr scene-viewer quick-look" camera-controls
        touch-action="pan-y">
    </model-viewer>

    <script>
        const questions = [
            {
                question: "What is the capital of France?",
                options: ["Paris", "Berlin", "Madrid", "Rome"],
                correct: "Paris"
            },
            {
                question: "What is 2 + 2?",
                options: ["3", "4", "5", "6"],
                correct: "4"
            },
            // Add more questions here
        ];

        function loadQuestion() {
            const questionIndex = Math.floor(Math.random() * questions.length);
            const currentQuestion = questions[questionIndex];
            
            document.getElementById('question').innerText = currentQuestion.question;
            const answersContainer = document.getElementById('answers');
            answersContainer.innerHTML = "";

            const shuffledOptions = [...currentQuestion.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.innerText = option;
                button.className = 'answer';
                button.onclick = () => {
                    const timeTaken = stopTimer();
                    const result = {
                        question: currentQuestion.question,
                        selected: option,
                        correct: currentQuestion.correct,
                        isCorrect: option === currentQuestion.correct,
                        timeTaken: timeTaken
                    };

                    saveToFirebase(result);
                    alert(option === currentQuestion.correct ? "Correct!" : "Wrong! The correct answer is " + currentQuestion.correct);
                    loadQuestion();
                    startTimer();
                };

                answersContainer.appendChild(button);
            });
        }

        loadQuestion();
        startTimer();
    </script>

    <script src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>
</html>

